(function(){"use strict";var t={9910:function(t,e,o){var s=o(5130),n=o(6768);function a(t,e,o,s,a,r){const i=(0,n.g2)("Navbar"),l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i),(0,n.bF)(l)])}const r={class:"navbar"},i={class:"navbar-container"},l={class:"navbar-logo"},d={class:"navbar-links"};function u(t,e,o,s,a,u){const c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("nav",r,[(0,n.Lk)("div",i,[(0,n.Lk)("div",l,[(0,n.bF)(c,{to:"/"},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)("My Blog")]))),_:1})]),(0,n.Lk)("div",d,[(0,n.bF)(c,{to:"/",class:"nav-link"},{default:(0,n.k6)((()=>e[2]||(e[2]=[(0,n.eW)("Home")]))),_:1}),a.loggedIn?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(c,{key:0,to:"/login",class:"nav-link"},{default:(0,n.k6)((()=>e[3]||(e[3]=[(0,n.eW)("Login")]))),_:1})),a.loggedIn?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(c,{key:1,to:"/register",class:"nav-link"},{default:(0,n.k6)((()=>e[4]||(e[4]=[(0,n.eW)("Register")]))),_:1})),a.loggedIn?((0,n.uX)(),(0,n.Wv)(c,{key:2,to:"/create",class:"nav-link"},{default:(0,n.k6)((()=>e[5]||(e[5]=[(0,n.eW)("Create Post")]))),_:1})):(0,n.Q3)("",!0),a.loggedIn?((0,n.uX)(),(0,n.CE)("button",{key:3,class:"logout-button",onClick:e[0]||(e[0]=(...t)=>u.logout&&u.logout(...t))},"Logout")):(0,n.Q3)("",!0)])])])}o(4114);var c=o(4373),p={data(){return{loggedIn:!1}},methods:{async checkLogin(){const t=await c.A.get("/api/auth/check_login.php");this.loggedIn=t.data.logged_in},async logout(){await c.A.post("/api/auth/logout.php"),this.loggedIn=!1,this.$router.push("/login")}},created(){this.checkLogin()}},g=o(1241);const h=(0,g.A)(p,[["render",u],["__scopeId","data-v-19146318"]]);var m=h,v={components:{Navbar:m}};const f=(0,g.A)(v,[["render",a]]);var b=f,k=o(1387);const y={class:"home"},L={key:0,class:"loading"},w={key:1},_={key:0},C={key:1,class:"no-posts"};function P(t,e,o,s,a,r){const i=(0,n.g2)("router-link"),l=(0,n.g2)("PostItem");return(0,n.uX)(),(0,n.CE)("div",y,[e[1]||(e[1]=(0,n.Lk)("h1",null,"게시판",-1)),(0,n.bF)(i,{to:"/create",class:"create-link"},{default:(0,n.k6)((()=>e[0]||(e[0]=[(0,n.eW)("게시글 작성하기")]))),_:1}),a.loading?((0,n.uX)(),(0,n.CE)("div",L,"게시글 불러오는 중...")):((0,n.uX)(),(0,n.CE)("div",w,[a.posts.length>0?((0,n.uX)(),(0,n.CE)("div",_,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.posts,(t=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:"post-item"},[(0,n.bF)(l,{post:t,onPostDeleted:r.removePost},null,8,["post","onPostDeleted"])])))),128))])):((0,n.uX)(),(0,n.CE)("div",C,"게시글이 없습니다."))]))])}o(8992),o(4520);var I=o(4232);const E={class:"post-item"},X=["disabled"],A=["disabled"];function $(t,e,o,s,a,r){return(0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("h2",null,(0,I.v_)(o.post.title),1),(0,n.Lk)("p",null,(0,I.v_)(o.post.content),1),(0,n.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>r.editPost&&r.editPost(...t)),disabled:a.loading},"수정",8,X),(0,n.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>r.deletePost&&r.deletePost(...t)),disabled:a.loading},(0,I.v_)(a.loading?"삭제중...":"삭제"),9,A)])}var O={name:"PostItem",props:{post:{type:Object,required:!0}},data(){return{loading:!1}},methods:{editPost(){this.$router.push({name:"EditPost",params:{id:this.post.id}})},async deletePost(){if(confirm("정말로 삭제하시겠습니까?")){this.loading=!0;try{const t=new FormData;t.append("id",this.post.id);const e=await c.A.post("http://tnswn10203.dothome.co.kr/api/posts/delete.php",t,{headers:{"Content-Type":"multipart/form-data"}});console.log(e.data.message),alert("게시글이 삭제되었습니다."),this.$emit("postDeleted",this.post.id)}catch(t){t.response&&t.response.data&&t.response.data.message&&(console.error("서버 오류:",t.response.data.message),alert(`오류: ${t.response.data.message}`))}finally{this.loading=!1}}}}};const x=(0,g.A)(O,[["render",$],["__scopeId","data-v-756e66aa"]]);var S=x,D={name:"Home",components:{PostItem:S},data(){return{posts:[],loading:!0}},created(){this.fetchPosts()},methods:{async fetchPosts(){try{const t=await c.A.get("http://tnswn10203.dothome.co.kr/api/posts/get_post.php");this.posts=t.data}catch(t){console.log("게시글 데이터를 불러오는 중 오류 발생:",t),alert("게시글 데이터를 불러오는데 실패했습니다.")}finally{this.loading=!1}},removePost(t){this.posts=this.posts.filter((e=>e.id!==t))}}};const F=(0,g.A)(D,[["render",P],["__scopeId","data-v-180cce63"]]);var U=F;const q=["disabled"],j=["disabled"],Q=["disabled"],W={key:2,class:"error"};function J(t,e,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",null,[e[4]||(e[4]=(0,n.Lk)("h1",null,"Login",-1)),r.isLoggedIn?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("form",{key:0,onSubmit:e[2]||(e[2]=(0,s.D$)(((...t)=>i.login&&i.login(...t)),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.username=t),placeholder:"Username",required:"",disabled:r.loading},null,8,q),[[s.Jo,r.username]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.password=t),type:"password",placeholder:"Password",required:"",disabled:r.loading},null,8,j),[[s.Jo,r.password]]),(0,n.Lk)("button",{type:"submit",disabled:r.loading},(0,I.v_)(r.loading?"Logging in...":"Login"),9,Q)],32)),r.isLoggedIn?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:e[3]||(e[3]=(...t)=>i.logout&&i.logout(...t))},"Logout")):(0,n.Q3)("",!0),r.error?((0,n.uX)(),(0,n.CE)("p",W,(0,I.v_)(r.error),1)):(0,n.Q3)("",!0)])}var T={data(){return{username:"",password:"",error:"",loading:!1,isLoggedIn:!1}},created(){this.isLoggedIn="true"===localStorage.getItem("isLoggedIn")},methods:{async login(){this.error="",this.loading=!0;try{const t=await c.A.post("/api/auth/login.php",{username:this.username,password:this.password});t.data.success?(this.isLoggedIn=!0,localStorage.setItem("isLoggedIn","true"),this.$router.push("/"),this.username="",this.password=""):this.error=t.data.message||"Login failed"}catch(t){console.error(t),this.error=t.response?.data?.message||"An unexpected error occurred"}finally{this.loading=!1}},logout(){this.isLoggedIn=!1,localStorage.removeItem("isLoggedIn"),this.$router.push("/")}}};const V=(0,g.A)(T,[["render",J],["__scopeId","data-v-dfbd2eba"]]);var R=V;const M={key:0,class:"error"},H={key:1,class:"success"};function N(t,e,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",null,[e[4]||(e[4]=(0,n.Lk)("h1",null,"Register",-1)),(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,s.D$)(((...t)=>i.register&&i.register(...t)),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.username=t),placeholder:"Username",required:""},null,512),[[s.Jo,r.username]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.password=t),type:"password",placeholder:"Password",required:""},null,512),[[s.Jo,r.password]]),e[3]||(e[3]=(0,n.Lk)("button",{type:"submit"},"Register",-1))],32),r.error?((0,n.uX)(),(0,n.CE)("p",M,(0,I.v_)(r.error),1)):(0,n.Q3)("",!0),r.success?((0,n.uX)(),(0,n.CE)("p",H,(0,I.v_)(r.success),1)):(0,n.Q3)("",!0)])}var B={data(){return{username:"",password:"",error:"",success:""}},methods:{async register(){if(this.error="",this.success="",this.username&&this.password)try{const t=await c.A.post("/api/auth/register.php",{username:this.username,password:this.password});t.data.success?(this.success="Registration successful! Redirecting to login...",setTimeout((()=>{this.$router.push("/login")}),2e3)):this.error=t.data.message||"Registration failed."}catch(t){this.error="An error occurred. Please try again later."}else this.error="Username and password are required."}}};const K=(0,g.A)(B,[["render",N]]);var z=K;const G={class:"create-post"},Y=["disabled"];function Z(t,e,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",G,[e[5]||(e[5]=(0,n.Lk)("h1",null,"게시글 작성",-1)),(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,s.D$)(((...t)=>i.submitPost&&i.submitPost(...t)),["prevent"]))},[(0,n.Lk)("div",null,[e[3]||(e[3]=(0,n.Lk)("label",{for:"title"},"제목",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":e[0]||(e[0]=t=>r.title=t),placeholder:"제목을 입력하세요",required:""},null,512),[[s.Jo,r.title]])]),(0,n.Lk)("div",null,[e[4]||(e[4]=(0,n.Lk)("label",{for:"content"},"내용",-1)),(0,n.bo)((0,n.Lk)("textarea",{type:"text",id:"content","onUpdate:modelValue":e[1]||(e[1]=t=>r.content=t),placeholder:"내용을 입력하세요",required:""},null,512),[[s.Jo,r.content]])]),(0,n.Lk)("button",{type:"submit",disabled:r.loading},(0,I.v_)(r.loading?"작성중...":"작성하기"),9,Y)],32)])}var tt={name:"CreatePost",data(){return{title:"",content:"",loading:!1}},methods:{async submitPost(){this.loading=!0;const t=new FormData;t.append("title",this.title),t.append("content",this.content);try{const e=await c.A.post("http://tnswn10203.dothome.co.kr/api/posts/create.php",t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});200===e.status?(alert(e.data.message||"게시글이 성공적으로 작성되었습니다."),this.$router.push("/")):alert(e.data.message||"게시글 작성에 실패했습니다.")}catch(e){console.log("게시글 작성 중 오류 : ",e),e.response&&e.response.data&&e.response.data.message?alert(`오류: ${e.response.data.message}`):alert("게시글 작성 중 알 수 없는 오류가 발생했습니다.")}finally{this.loading=!1}}}};const et=(0,g.A)(tt,[["render",Z],["__scopeId","data-v-5f792aa5"]]);var ot=et;const st={class:"edit-post"},nt=["disabled"];function at(t,e,o,a,r,i){return(0,n.uX)(),(0,n.CE)("div",st,[e[5]||(e[5]=(0,n.Lk)("h1",null,"게시글 수정",-1)),(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,s.D$)(((...t)=>i.updatePost&&i.updatePost(...t)),["prevent"]))},[(0,n.Lk)("div",null,[e[3]||(e[3]=(0,n.Lk)("label",{for:"title"},"제목",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":e[0]||(e[0]=t=>r.title=t),placeholder:"제목을 입력하세요",required:""},null,512),[[s.Jo,r.title]])]),(0,n.Lk)("div",null,[e[4]||(e[4]=(0,n.Lk)("label",{for:"content"},"내용",-1)),(0,n.bo)((0,n.Lk)("textarea",{type:"text",id:"content","onUpdate:modelValue":e[1]||(e[1]=t=>r.content=t),placeholder:"내용을 입력하세요",required:""},null,512),[[s.Jo,r.content]])]),(0,n.Lk)("button",{type:"submit",disabled:r.loading},(0,I.v_)(r.loading?"작성중...":"작성하기"),9,nt)],32)])}var rt={name:"EditPost",data(){return{title:"",content:"",loading:!1}},created(){const t=this.$route.params.id;console.log("수정할 게시글 ID:",t),c.A.get(`http://tnswn10203.dothome.co.kr/api/posts/get_post.php?id=${t}`).then((t=>{const e=t.data;this.title=e.title,this.content=e.content})).catch((t=>{console.error("게시글 데이터를 가져오는 중 오류발생: ",t),alert("게시글 데이터를 불러오는데 실패했습니다.")}))},methods:{async updatePost(){this.loading=!0;const t=new FormData;t.append("id",this.$route.params.id),t.append("title",this.title),t.append("content",this.content);try{const e=await c.A.post("http://tnswn10203.dothome.co.kr/api/posts/update.php",t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});console.log("응답:",e.data),200===e.status?(alert(e.data.message||"게시글이 성공적으로 수정되었습니다."),this.$router.push("/")):alert(e.data.message||"게시글 수정에 실패했습니다.")}catch(e){console.error("게시글 수정 중 오류: ",e),e.response&&e.response.data&&e.response.data.message?alert(`오류: ${e.response.data.message}`):alert("게시글 수정 중 알 수 없는 오류가 발생했습니다.")}finally{this.loading=!1}}}};const it=(0,g.A)(rt,[["render",at],["__scopeId","data-v-75431cb8"]]);var lt=it;const dt=(0,k.aE)({history:(0,k.LA)(),routes:[{path:"/",name:"Home",component:U},{path:"/login",name:"Login",component:R},{path:"/register",name:"Register",component:z},{path:"/create",name:"CreatePost",component:ot},{path:"/edit/:id",name:"EditPost",component:lt,props:!0}]});var ut=dt,ct=o(782),pt=(0,ct.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),gt={methods:{async $api(t,e,o){return(await(0,c.A)({method:e,url:t,data:o}).catch((t=>{console.log(t)}))).data}}};(0,s.Ef)(b).use(pt).use(ut).mixin(gt).mount("#app")}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,o),a.exports}o.m=t,function(){var t=[];o.O=function(e,s,n,a){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],a=t[u][2];for(var i=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(o.O).every((function(t){return o.O[t](s[l])}))?s.splice(l--,1):(i=!1,a<r&&(r=a));if(i){t.splice(u--,1);var d=n();void 0!==d&&(e=d)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[s,n,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,a,r=s[0],i=s[1],l=s[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(l)var u=l(o)}for(e&&e(s);d<r.length;d++)a=r[d],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(u)},s=self["webpackChunkvueportable"]=self["webpackChunkvueportable"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(9910)}));s=o.O(s)})();
//# sourceMappingURL=app.0547962d.js.map